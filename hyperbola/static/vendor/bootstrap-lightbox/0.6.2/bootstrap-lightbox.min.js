+function(b){var c=function(e,d){this.options=d;this.$element=b(e);this.$backdrop=null;this.isShown=null;if(this.options.remote){this.$element.load(this.options.remote)}};c.prototype=b.extend({},b.fn.modal.Constructor.prototype);c.prototype.constructor=c;c.DEFAULTS={backdrop:true,keyboard:true,show:true};c.prototype.show=function(g){var d=this;var f=b.Event("show.bs.lightbox",{relatedTarget:g});this.$element.trigger(f);if(this.isShown||f.isDefaultPrevented()){return}this.isShown=true;this.escape();this.$element.on("click.dismiss.lightbox",'[data-dismiss="lightbox"]',b.proxy(this.hide,this));this.preloadSize(function(){d.backdrop(function(){var i=b.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(document.body)}d.$element.show();if(i){d.$element[0].offsetWidth}d.$element.addClass("in").attr("aria-hidden",false);d.enforceFocus();var h=b.Event("shown.bs.lightbox",{relatedTarget:g});i?d.$element.find(".lightbox-dialog").one(b.support.transition.end,function(){d.$element.focus().trigger(h)}).emulateTransitionEnd(300):d.$element.focus().trigger(h)})})};c.prototype.hide=function(d){if(d){d.preventDefault()}d=b.Event("hide.bs.lightbox");this.$element.trigger(d);if(!this.isShown||d.isDefaultPrevented()){return}this.isShown=false;this.escape();b(document).off("focusin.bs.lightbox");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.lightbox");b.support.transition&&this.$element.hasClass("fade")?this.$element.one(b.support.transition.end,b.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()};c.prototype.enforceFocus=function(){b(document).off("focusin.bs.lightbox").on("focusin.bs.lightbox",b.proxy(function(d){if(this.$element[0]!==d.target&&!this.$element.has(d.target).length){this.$element.focus()}},this))};c.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.bs.lightbox",b.proxy(function(d){d.which==27&&this.hide()},this))}else{if(!this.isShown){this.$element.off("keyup.dismiss.bs.lightbox")}}};c.prototype.hideModal=function(){var d=this;this.$element.hide();this.backdrop(function(){d.removeBackdrop();d.$element.trigger("hidden.bs.lightbox")})};c.prototype.backdrop=function(g){var f=this;var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=b.support.transition&&e;this.$backdrop=b('<div class="modal-backdrop '+e+'" />').appendTo(document.body);this.$element.on("click.dismiss.lightbox",b.proxy(function(h){if(h.target!==h.currentTarget){return}this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this));if(d){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!g){return}d?this.$backdrop.one(b.support.transition.end,g).emulateTransitionEnd(150):g()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,g).emulateTransitionEnd(150):g()}else{if(g){g()}}}};c.prototype.preloadSize=function(p){var m=b.Callbacks();if(p){m.add(p)}var k=this;var d,f,n,h,i,o,g,l,e,j;d=b(window).height();f=b(window).width();n=parseInt(k.$element.find(".lightbox-content").css("padding-top"),10);h=parseInt(k.$element.find(".lightbox-content").css("padding-bottom"),10);i=parseInt(k.$element.find(".lightbox-content").css("padding-left"),10);o=parseInt(k.$element.find(".lightbox-content").css("padding-right"),10);g=k.$element.find(".lightbox-content").find("img:first");if(g.length<=0){return m.fire()}l=new Image();l.onload=function(){if((l.width+i+o)>=f){e=l.width;j=l.height;l.width=f-i-o;l.height=j/e*l.width}if((l.height+n+h)>=d){e=l.width;j=l.height;l.height=d-n-h;l.width=e/j*l.height}k.$element.find(".lightbox-dialog").css({position:"fixed",width:l.width+i+o,height:l.height+n+h,top:(d/2)-((l.height+n+h)/2),left:"50%","margin-left":-1*(l.width+i+o)/2});k.$element.find(".lightbox-content").css({width:l.width+i+o,height:l.height+n+h});g.css({width:l.width,height:l.height});m.fire()};l.src=g.attr("src")};var a=b.fn.lightbox;b.fn.lightbox=function(d,e){return this.each(function(){var h=b(this);var g=h.data("bs.lightbox");var f=b.extend({},c.DEFAULTS,h.data(),typeof d=="object"&&d);if(!g){h.data("bs.lightbox",(g=new c(this,f)))}if(typeof d=="string"){g[d](e)}else{if(f.show){g.show(e)}}})};b.fn.lightbox.Constructor=c;b.fn.lightbox.noConflict=function(){b.fn.lightbox=a;return this};b(document).on("click.bs.lightbox.data-api",'[data-toggle="lightbox"]',function(i){var h=b(this);var f=h.attr("href");var d=b(h.attr("data-target")||(f&&f.replace(/.*(?=#[^\s]+$)/,"")));var g=d.data("lightbox")?"toggle":b.extend({remote:!/#/.test(f)&&f},d.data(),h.data());i.preventDefault();d.lightbox(g,this).one("hide",function(){h.is(":visible")&&h.focus()})});b(document).on("show.bs.lightbox",".lightbox",function(){b(document.body).addClass("lightbox-open")}).on("hidden.bs.lightbox",".lightbox",function(){b(document.body).removeClass("lightbox-open")})}(window.jQuery);
