{% extends "base.html" %}
{% load hyperbola_core_tags imagekit url_tags %}

{% block active_app %} contact {% endblock active_app %}
{% block title %} {{ block.super }} :: Contact {% endblock title %}
{% block section_title %} Contact Information {% endblock section_title %}

{% block content %}
<div class="row">
  <div class="col-md-9">
    <h1>{{ name|escape }}</h1>
    {% for contact in contacts %}
    {% ifchanged contact.type %}
    <h2>{{ contact.type.type|escape }}</h2>
    {% endifchanged %}
    <div class="row">
      <div class="col-md-4 hyperbola-ellipsis">{{ contact.display_name|escape }}</div>
      {% if contact.is_url %}
      <div class="col-md-8 hyperbola-ellipsis">
        <a href="{{ contact.value|escape }}">{{ contact.display_value|escape }}</a>
      </div>
      {% elif contact.is_email %}
      <div class="col-md-8 hyperbola-ellipsis">{{ contact.display_value|anti_spamize }}</div>
      {% else %}
      <div class="col-md-8 hyperbola-ellipsis">{{ contact.display_value|escape }}</div>
      {% endif %}
    </div>
    {% endfor %}
    {% if resume %}
    <h2>Résumé</h2>
    <div class="row">
      <div class="col-md-4 hyperbola-ellipsis">
        <relative-time datetime="{{ resume.date|date:"Y-m-d" }}" month="short" day="numeric" year="numeric" hour="numeric" minute="numeric">
          {{ resume.date|date:"b d Y" }}
        </relative-time>
      </div>
      <div class="col-md-8 hyperbola-ellipsis">
        <a href="{%  fullurl resume.get_absolute_url %}">{%  fullurl resume.get_absolute_url %}</a>
      </div>
    </div>
    {% endif %}
  </div>
  {% if about %}
  <div class="col-md-3">
    <h2>About</h2>
    {% thumbnail "hyperbola:thumbnail" "240x240" about.photo retina_scale=1 as prof_1x %}
    {% thumbnail "hyperbola:thumbnail" "240x240" about.photo retina_scale=2 as prof_2x %}
    {% thumbnail "hyperbola:thumbnail" "240x240" about.photo retina_scale=3 as prof_3x %}
    <div>
      <a href="{{ about.photo.url|escape }}">
        {# access width and height before url: https://github.com/matthewwithanm/django-imagekit/issues/350 #}
        <img alt="Ryan Lopopolo" width="{{ prof_1x.width|escape }}" height="{{ prof_1x.height|escape }}" src="{{ prof_1x.url|escape }}" data-rjs="3" class="center-block img-thumbnail img-thumbnail-hyperbola">
        <!-- 1x: {{ prof_1x.url }} -->
        <!-- 2x: {{ prof_2x.url }} -->
        <!-- 3x: {{ prof_3x.url }} -->
      </a>
    </div>
    <p>{{ about.blurb|escape }}</p>
  </div>
  {% endif %}
</div>
{% endblock content %}
